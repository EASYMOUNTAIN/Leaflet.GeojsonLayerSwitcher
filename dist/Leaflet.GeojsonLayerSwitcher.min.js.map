{"version":3,"sources":["src/js/Leaflet.GeojsonLayerSwitcher.js"],"names":["L","commonStyle","opacity","weight","dashArray","GeoJSONLayerSwitcher","Handler","extend","options","propertyStateSelected","style","Object","assign","color","styleSelected","selectButton","icon","bgColor","deselectButton","popupAnchor","initialize","map","prototype","call","Util","setOptions","context","_dialog","control","dialog","initOpen","size","anchor","_geoJSONLayer","geoJson","feature","properties","hasOwnProperty","_getStyleFor","onEachFeature","layer","PolylineDecorator","decorator","polylineDecorator","patterns","addTo","_map","addHooks","dialogContent","_initDialogContent","setContent","removeHooks","getLayers","forEach","removeLayer","clearLayers","close","removeControl","addData","geojson","layers","_index","_count","length","_goTo","open","container","DomUtil","create","_navTitle","navBar","_prevButton","_switchButton","_switchButtonIcon","_nextButton","DomEvent","on","_previous","_next","_toggle","_currentLayer","_focus","_updateDialogFor","setStyle","_updateToggleButtonFor","readableIndex","innerHTML","classList","remove","add","backgroundColor","fitBounds","getBounds","getSelection","selection","push","geoJSONLayerSwitcher"],"mappings":"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","file":"dist/Leaflet.GeojsonLayerSwitcher.min.js","sourcesContent":["export default function(L) {\n\n\tconst commonStyle = {\n\t\topacity: 1,\n\t\tweight: 5,\n\t\tdashArray: '10, 30',\n\t};\n\n\tconst GeoJSONLayerSwitcher = L.GeoJSONLayerSwitcher = L.Handler.extend({\n\n\t\toptions: {\n\t\t\tpropertyStateSelected: 'selected',\n\t\t\tstyle: Object.assign({color: '#f00'}, commonStyle),\n\t\t\tstyleSelected: Object.assign({color: '#0f0'}, commonStyle),\n\t\t\tselectButton: {\n\t\t\t\ticon: 'fa-plus',\n\t\t\t\tbgColor: '#4caf50'\n\t\t\t},\n\t\t\tdeselectButton: {\n\t\t\t\ticon: 'fa-minus',\n\t\t\t\tbgColor: '#f00'\n\t\t\t},\n\t\t\tpopupAnchor: [10, 60],\n\t\t},\n\n\t\tinitialize: function(map, options) {\n\t\t\tL.Handler.prototype.initialize.call(this, map);\n\t\t\tL.Util.setOptions(this, options ||Â {});\n\n\t\t\tconst context = this;\n\n\t\t\tthis._dialog = L.control.dialog({\n\t\t\t\tinitOpen: false,\n\t\t\t\tsize: [300, 160],\n\t\t\t\tanchor: context.options.popupAnchor,\n\t\t\t});\n\n\t\t\tthis._geoJSONLayer = L.geoJson(null, {\n\t\t\t\tstyle: function(feature) {\n\t\t\t\t\tif (!feature.properties.hasOwnProperty(context.options.propertyStateSelected)) {\n\t\t\t\t\t\tfeature.properties[context.options.propertyStateSelected] = false;\n\t\t\t\t\t}\n\t\t\t\t\treturn context._getStyleFor(feature);\n\t\t\t\t},\n\t\t\t\tonEachFeature: function(feature, layer) {\n\t\t\t\t\tconst style = context._getStyleFor(feature);\n\t\t\t\t\tif (L.PolylineDecorator && style.hasOwnProperty('patterns')) {\n\t\t\t\t\t\tlayer.decorator = L.polylineDecorator(layer, {\n\t\t\t\t\t\t\tpatterns: style.patterns\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlayer.decorator.addTo(context._map);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_getStyleFor: function(feature) {\n\t\t\treturn (feature.properties && feature.properties[this.options.propertyStateSelected]) ? this.options.styleSelected : this.options.style;\n\t\t},\n\n\t\taddHooks: function() {\n\t\t\tthis._geoJSONLayer.addTo(this._map);\n\t\t\tthis._dialog.addTo(this._map);\n\t\t\tconst dialogContent = this._initDialogContent();\n\t\t\tthis._dialog.setContent(dialogContent);\n\t\t},\n\n\t\tremoveHooks: function() {\n\t\t\tthis._geoJSONLayer.getLayers().forEach(layer => {\n\t\t\t\tif (L.PolylineDecorator && layer.hasOwnProperty('decorator')) {\n\t\t\t\t\tthis._map.removeLayer(layer.decorator);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._geoJSONLayer.clearLayers();\n\t\t\tthis._map.removeLayer(this._geoJSONLayer);\n\t\t\tthis._dialog.close();\n\t\t\tthis._map.removeControl(this._dialog);\n\t\t},\n\n\t\taddData: function(geojson) {\n\t\t\tthis._geoJSONLayer.addData(geojson);\n\t\t\tconst layers = this._geoJSONLayer.getLayers();\n\n\t\t\tthis._index = 0;\n\t\t\tthis._count = layers.length;\n\t\t\tif (layers.length > 0) {\n\t\t\t\tthis._goTo(layers[0]);\n\t\t\t}\n\t\t\tthis._dialog.open();\n\t\t\treturn this;\n\t\t},\n\n\t\t_initDialogContent: function() {\n\t\t\tlet container = L.DomUtil.create('div');\n\n\t\t\tthis._navTitle = L.DomUtil.create('h4', 'leaflet-geoJSONLayerSwitcher-title', container);\n\t\t\tlet navBar = L.DomUtil.create('div', 'leaflet-geoJSONLayerSwitcher-navbar', container);\n\n\t\t\tthis._prevButton = L.DomUtil.create('a', 'leaflet-geoJSONLayerSwitcher prev', navBar);\n\t\t\tL.DomUtil.create('i', 'fa fa-chevron-left', this._prevButton);\n\n\t\t\tthis._switchButton = L.DomUtil.create('a', 'leaflet-geoJSONLayerSwitcher switch', navBar);\n\t\t\tthis._switchButtonIcon = L.DomUtil.create('i', 'fa', this._switchButton);\n\n\t\t\tthis._nextButton = L.DomUtil.create('a', 'leaflet-geoJSONLayerSwitcher next', navBar);\n\t\t\tL.DomUtil.create('i', 'fa fa-chevron-right', this._nextButton);\n\n\t\t\tconst context = this;\n\n\t\t\tL.DomEvent.on(this._prevButton, 'click', function() {\n\t\t\t\tcontext._previous();\n\t\t\t}, this);\n\n\t\t\tL.DomEvent.on(this._nextButton, 'click', function() {\n\t\t\t\tcontext._next();\n\t\t\t}, this);\n\n\t\t\tL.DomEvent.on(this._switchButton, 'click', function() {\n\t\t\t\tcontext._toggle();\n\t\t\t}, this);\n\n\t\t\treturn container;\n\t\t},\n\n\t\t_index: 0,\n\t\t_count: 0,\n\n\t\t_previous: function() {\n\t\t\tthis._index = (this._index + this._count - 1) % this._count;\n\t\t\tthis._goTo(this._currentLayer());\n\t\t},\n\n\t\t_next: function() {\n\t\t\tthis._index = (this._index + 1) % this._count;\n\t\t\tthis._goTo(this._currentLayer());\n\t\t},\n\n\t\t_goTo: function(layer) {\n\t\t\tif (layer === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._focus(layer);\n\t\t\tthis._updateDialogFor(layer);\n\t\t},\n\n\t\t_toggle: function() {\n\t\t\tlet layer = this._currentLayer();\n\t\t\tif (layer === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (L.PolylineDecorator && layer.hasOwnProperty('decorator')) {\n\t\t\t\tthis._map.removeLayer(layer.decorator);\n\t\t\t\tdelete layer.decorator;\n\t\t\t}\n\n\t\t\tlayer.feature.properties[this.options.propertyStateSelected] = !layer.feature.properties[this.options.propertyStateSelected];\n\n\t\t\tconst style = this._getStyleFor(layer.feature);\n\t\t\tlayer.setStyle(style);\n\n\t\t\tif (L.PolylineDecorator && style.hasOwnProperty('patterns')) {\n\t\t\t\tlayer.decorator = L.polylineDecorator(layer, {\n\t\t\t\t\tpatterns: style.patterns\n\t\t\t\t});\n\t\t\t\tlayer.decorator.addTo(this._map);\n\t\t\t}\n\n\t\t\tthis._updateToggleButtonFor(layer);\n\t\t},\n\n\t\t_updateDialogFor: function(layer) {\n\t\t\tif (layer === null) {\n\t\t\t\tthis._dialog.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst readableIndex = this._index + 1;\n\t\t\tthis._navTitle.innerHTML = readableIndex+'/'+this._count;\n\t\t\tthis._updateToggleButtonFor(layer);\n\t\t},\n\n\t\t_updateToggleButtonFor: function(layer) {\n\t\t\tif (layer.feature.properties[this.options.propertyStateSelected]) {\n\t\t\t\tthis._switchButtonIcon.classList.remove(this.options.selectButton.icon);\n\t\t\t\tthis._switchButtonIcon.classList.add(this.options.deselectButton.icon);\n\t\t\t\tthis._switchButton.style.backgroundColor = this.options.deselectButton.bgColor;\n\t\t\t} else {\n\t\t\t\tthis._switchButtonIcon.classList.remove(this.options.deselectButton.icon);\n\t\t\t\tthis._switchButtonIcon.classList.add(this.options.selectButton.icon);\n\t\t\t\tthis._switchButton.style.backgroundColor = this.options.selectButton.bgColor;\n\t\t\t}\n\t\t},\n\n\t\t_focus: function(layer) {\n\t\t\tif (layer === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._map.fitBounds(layer.getBounds());\n\t\t},\n\n\t\t_currentLayer: function() {\n\t\t\tif (this._count === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this._geoJSONLayer.getLayers()[this._index];\n\t\t},\n\n\t\tgetSelection: function() {\n\t\t\tlet selection = [];\n\t\t\tthis._geoJSONLayer.getLayers().forEach(layer => {\n\t\t\t\tif (layer.feature.properties[this.options.propertyStateSelected]) {\n\t\t\t\t\tselection.push(layer);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn selection;\n\t\t},\n\t});\n\n\t// Factory\n\tL.geoJSONLayerSwitcher = function(map, options) {\n\t\treturn new GeoJSONLayerSwitcher(map, options);\n\t};\n\n\treturn GeoJSONLayerSwitcher;\n}\n"]}